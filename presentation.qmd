---
title: "Impact of Urban Activity on Air Quality"
subtitle: "INFO 523 - Fall 2025 - Final Project"
author: "Stephen Watts and Kayla Wowk"
title-slide-attributes:
  data-background-image: images/watercolour_sys02_img34_teacup-ocean.jpg
  data-background-size: stretch
  data-background-opacity: "0.7"
  data-slide-number: none
format:
  revealjs:
    theme:  ['data/customtheming.scss']
  
editor: visual
jupyter: python3
execute:
  echo: false
  fig-width: 9
  fig-height: 5
  fig-dpi: 100
---

```{python}
#| label: load-packages
#| include: false

# Load packages here
import pandas as pd
import numpy as np
from pandas.tseries.holiday import USFederalHolidayCalendar
import seaborn as sns
import matplotlib.pyplot as plt
import statsmodels.formula.api as smf
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestRegressor
from sklearn.metrics import mean_squared_error, r2_score

```

```{python}
#| label: setup
#| include: false
#| 
# Set up plot theme and figure resolution
sns.set_theme(style="whitegrid")
sns.set_context("notebook", font_scale=1.1)

plt.rcParams['figure.dpi'] = 300
plt.rcParams['savefig.dpi'] = 300
plt.rcParams['figure.figsize'] = (6, 6 * 0.618)
```

```{python}
#| label: load-data
#| include: false
# Load data in Python
df24 = pd.read_csv('data/CO_2024_MA.csv')
df23 = pd.read_csv('data/CO_2023_MA.csv')
df22 = pd.read_csv('data/CO_2022_MA.csv')
df21 = pd.read_csv('data/CO_2021_MA.csv')
df19 = pd.read_csv('data/CO_2019_MA.csv')
df18 = pd.read_csv('data/CO_2018_MA.csv')
df17 = pd.read_csv('data/CO_2017_MA.csv')
df16 = pd.read_csv('data/CO_2016_MA.csv')
df_all = pd.concat([df24, df23, df22, df21, df19, df18, df17, df16], ignore_index=True)

# Rename Daily Max 8-hour CO Concentration
df_all.rename(columns={'Daily Max 8-hour CO Concentration': 'CO'}, inplace=True)

# Convert dates to datetime
df_all['Date'] = pd.to_datetime(df_all['Date'])

# Create column for seasons
def get_season(month):
    '''Returns the season for a given date'''
    if 3 <= month <= 5:
        return 'Spring'
    if 6 <= month <= 8:
        return 'Summer'
    if 9 <= month <= 11:
        return 'Fall'
    return 'Winter'
df_all['Season'] = df_all['Date'].dt.month.apply(get_season)

# Create column that signifies if it is a weekend
df_all['is_weekend'] = df_all['Date'].dt.dayofweek >= 5

# Create column that signifies if it is a federal holiday
cal = USFederalHolidayCalendar()
holidays = cal.holidays(start=df_all['Date'].min(), end=df_all['Date'].max())
df_all['is_holiday'] = df_all['Date'].isin(holidays)

# Determine which holidays create long weekends
holidays = pd.Series(holidays)

# Identify holidays that fall near or on weekends
weekend_expanding_holidays = holidays[(holidays.dt.dayofweek == 4) |
    (holidays.dt.dayofweek == 5) |
    (holidays.dt.dayofweek == 6) |
    (holidays.dt.dayofweek == 0)]

# Define long weekend days
df_all['is_long_weekend'] = (df_all['Date'].isin(weekend_expanding_holidays) |
    df_all['Date'].isin(weekend_expanding_holidays - pd.Timedelta(days=1)) |
    df_all['Date'].isin(weekend_expanding_holidays + pd.Timedelta(days=1)))

# Keep relevant columns only
df = df_all[['Date', 'Site ID', 'CO', 'Season', 'is_weekend',
          'is_holiday', 'is_long_weekend']]

#Rename Site ID
df.rename(columns={'Site ID': 'ID'}, inplace=True)

# Day of week and month for modeling
df['dayofweek'] = df['Date'].dt.dayofweek
df['month'] = df['Date'].dt.month
df['dayofyear'] = df['Date'].dt.dayofyear
```

## Background & Research Question
::::: columns
::: {.column width="50%"}
-   Some text

-   goes here
:::::

## Data & Methods


## Preliminary Findings


## Interpretation & Significance


## Broader Impacts


## Conclusion & Closing


## Distribution of CO Levels

```{python}
sns.histplot(df['CO'], bins=30, kde=True)
plt.title('Distribution of CO Levels')
plt.xlabel('CO Level')
plt.ylabel('Frequency')
plt.show()
```

## CO levels by Season

```{python}
sns.boxplot(x='Season', y='CO', data=df)
plt.title('CO Levels by Season')
plt.xlabel('Season')
plt.ylabel('CO Level')
plt.show()
```

## CO levels on Weekends vs Weekdays

```{python}
sns.boxplot(x='is_weekend', y='CO', data=df)
plt.title('CO Levels: Weekends vs Weekdays')
plt.xlabel('Is Weekend')
plt.ylabel('CO Level')
plt.show()
```

## CO levels on Long Weekends vs Regular Days

```{python}
sns.boxplot(x='is_long_weekend', y='CO', data=df)
plt.title('CO Levels: Long Weekends vs Regular Days')
plt.xlabel('Is Long Weekend')
plt.ylabel('CO Level')
plt.show()
```

## Quarto

-   Testing commit changes to website presentation.

-   Test 2

## Layouts

You can use plain text

::::: columns
::: {.column width="40%"}
-   or bullet points[^1]
:::

::: {.column width="60%"}
or in two columns
:::
:::::

[^1]: And add footnotes

-   like

-   this

## Code

```{python}


```

## Plots

```{python}



```

## Plot and text

::::: columns
::: {.column width="50%"}
-   Some text

-   goes here
:::

::: {.column width="50%"}
```{python}


```
:::
:::::

# A new section...

## Tables

If you want to generate a table, make sure it is in the HTML format (instead of Markdown or other formats), e.g.,

```{python}


```

## Images

![Image credit: Danielle Navarro, Percolate.](images/watercolour_sys02_img34_teacup-ocean.png){fig-align="center" width="500"}

## Math Expressions {.smaller}

You can write LaTeX math expressions inside a pair of dollar signs, e.g.Â \$\\alpha+\\beta\$ renders $\alpha + \beta$. You can use the display style with double dollar signs:

```         
$$\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i$$
```

$$
\bar{X}=\frac{1}{n}\sum_{i=1}^nX_i
$$

Limitations:

1.  The source code of a LaTeX math expression must be in one line, unless it is inside a pair of double dollar signs, in which case the starting `$$` must appear in the very beginning of a line, followed immediately by a non-space character, and the ending `$$` must be at the end of a line, led by a non-space character;

2.  There should not be spaces after the opening `$` or before the closing `$`.

# Wrap up

## Feeling adventurous?

-   You are welcomed to use the default styling of the slides. In fact, that's what I expect majority of you will do. You will differentiate yourself with the content of your presentation.

-   But some of you might want to play around with slide styling. Some solutions for this can be found at https://quarto.org/docs/presentations/revealjs.